# 어셈블리어 0925

## 1. 어셈블리어란?
- 어셈블리어는 CPU 명령어 집합(ISA)에 따라 기계어와 1:1로 대응되는 저급 언어로, 사람이 이해할 수 있는 **기호(mnemonic)**로 작성하며, 어셈블러가 이를 기계어로 번역한다.
- 하드웨어 구조, 메모리, 레지스터, 함수 호출 방식 등 시스템의 동작 원리를 깊이 이해할 수 있다.
- 임베디드, 커널, 보안, 리버스 엔지니어링 등 저수준 제어가 필요한 분야에서 필수적이다.

---

## 2. 기본 구성 요소
- **명령어(Mnemonic):** CPU가 수행할 작업을 나타내는 키워드 (예: `mov`, `add`)
- **피연산자(Operand):** 명령어의 입력값 또는 결과 저장 위치. 첫 번째 피연산자는 목적지(destination)로 사용됨.
- **라벨(Label):** 코드나 데이터 위치를 식별하는 이름. 코드라벨과 데이터라벨로 구분.
- **주석(Comment):** 코드 설명을 위한 부분으로, 실행에는 영향 없음. 한 줄 주석(;)과 블록 주석(COMMENT 지시어) 지원.

---

## 3. 프로그램 구조와 디렉티브
- `.DATA`: 변수, 상수 등 데이터 정의 영역
- `.CODE`: 실행 코드 정의 영역
- `.STACK`: 스택 크기 정의 영역
- **디렉티브:** 어셈블러에게 프로그램 구조와 데이터, 매크로, 프로시저 등을 정의하는 명령. 실행시간에 실행되지 않으며, 어셈블러마다 디렉티브 집합이 다름.

---

## 4. 데이터 정의와 자료형
- **DB, DW, DD:** 각각 1바이트, 2바이트, 4바이트 데이터 정의
- **DUP:** 반복 카운터로 여러 데이터 공간 할당 (예: `BYTE 20 DUP(0)`)
- **자료형:** BYTE(8비트), WORD(16비트), DWORD(32비트), QWORD(64비트), TBYTE(10바이트 BCD), REAL4/8/10(실수형)

---

## 5. 리터럴과 상수
- **정수 리터럴:** 16진수(h), 8진수(q/o), 10진수(d), 2진수(b) 등 접미사로 구분
- **실수 리터럴:** 부호, 소수점, 지수(exponent) 형태로 선언 (예: `+3.0`, `-44.2E+05`)
- **문자열 리터럴:** 따옴표로 감싼 문자들의 열 (`'abc'`, `"Hello! World"`)
- **심볼릭 상수:** `=`, `EQU`, `TEXTEQU`로 이름과 값/텍스트/매크로를 연결. `EQU`는 재정의 불가, `TEXTEQU`는 재정의 가능.

---

## 6. 예약어와 식별자
- **예약어:** MASM 등에서 특별한 목적을 가진 키워드(명령어, 레지스터, 디렉티브, 속성, 연산자, 미리 정의된 기호 등)
- **식별자:** 프로그래머가 선택한 이름(변수, 상수, 프로시저, 코드 레이블 등). 1~247자, 대소문자 구분 없음, 첫 글자는 숫자 불가, 예약어와 중복 불가.

---

## 7. 명령어와 실행
- **명령어:** 프로그램이 어셈블되어 실행 가능한 문장. 라벨, 명령어, 피연산자, 주석으로 구성.
- **NOP:** 아무 동작도 하지 않는 명령어로, 코드 정렬 등에 사용.
- **기본 명령어 예시:** `mov`, `add`, `sub`, `push`, `pop`, `inc`, `dec`, `call`, `ret`, `cmp`, `jmp`, `int` 등

---

## 8. 엔디언(Endian)
- **리틀 엔디언:** x86 프로세서에서 사용. 최하위 바이트부터 저장.
- **빅 엔디언:** 최상위 바이트부터 저장. 사람이 읽기 쉬움.

---

## 9. 리스트 파일과 실습 환경
- **리스트 파일:** 어셈블링 시 생성되는 파일로, 줄번호, 오프셋, 기계어 코드, 심볼 테이블 포함.
- **실습 환경:** Visual Studio + Irvine 라이브러리, 명령어 빌드 및 디버깅(F5), 명령어 직접 실행(ml/link).

---

## 10. 어셈블리 코드 기본 뼈대 예시
```.386
.model flat, stdcall
.stack 4096
ExitProcess PROTO, dwExitCode : DWORD
.data
; 데이터 정의
.code
main PROC
; 실행 코드
INVOKE ExitProcess, 0
main ENDP
END main
```
- Irvine32.inc를 추가하면 ExitProcess 관련 코드를 생략 가능.

---

## 11. 요약
어셈블리어는 라벨, 명령어, 피연산자, 주석 등으로 구성되며, 데이터와 코드 영역이 명확히 구분된다. 다양한 자료형과 상수, 디렉티브, 명령어를 통해 하드웨어와 가까운 수준에서 프로그램을 작성할 수 있으며, 시스템 구조와 실행 과정을 깊이 이해할 수 있다. 실습 환경 구축과 리스트 파일 활용, 엔디언 방식 이해 등도 중요하다.
